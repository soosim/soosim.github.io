## source 命令及点命令及exec

Xie 2017-07-28  上海.新天地


[TOC]

### source与点命令

​	点命令是source命令的另一个名称。
​	该命令主要由以下几个常用作用：

#### 1.不启动新进程执行脚本

​	这两个命令都以一个脚本文件名为参数，该脚本将作为当前 shell 的环境执行，即不会启动一个新的子进程。所有在脚本中设置的变量将成为当前 Shell 的一部分，同样的，当前脚本中设置的变量也将作为脚本的环境。
​	不会产生新的进程，继承当前shell环境变量，而且被调用的脚本运行结束后，它拥有的环境变量和声明变量会被当前shell保留，类似将调用脚本的内容复制过来直接执行。执行完毕后原主shell继续运行。

#### 2.重新加载初始化文件
source (或.) 命令通常用于重新执行刚修改的初始化文件，如 .bash_profile 和 .profile 等等。例如，如果在登录后对 .bash_profile 中的 EDITER 和 TERM 变量做了修改，则可以用 source 命令重新执行 .bash_profile 中的命令而不用注销并重新登录。像 .bash_profile 或其它类似的 Shell 脚本这样。

#### 3.强制执行脚本
​	source 命令会强制执行脚本中的全部命令，而忽略文件的权限。


### exec命令
1. shell的内建命令exec将并不启动新的shell，而是用要被执行命令替换当前的shell进程，并且将老进程的环境清理掉，而且exec命令后的其它命令将不再执行。(系统调用exec是以新的进程去代替原来的进程，但进程的PID保持不变)
2. 使用exec来调用脚本，被执行的脚本会继承当前shell的环境变量。
3. 
  ​因此，如果你在一个shell里面，执行exec ls那么，当列出了当前目录后，这个shell就自己退出了，因为这个shell进程已被替换为仅仅执行ls命令的一个进程，执行结束自然也就退出了。

### fork

​	直接运行脚本，会以当前shell为父进程，产生新的进程，并且继承主脚本的环境变量和声明变量。执行完毕后，主脚本不会保留其环境变量和声明变量。

​	