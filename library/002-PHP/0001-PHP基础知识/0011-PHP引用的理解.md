# PHP引用的真正理解

[TOC]

​	文章引用自博客[http://www.cnblogs.com/thinksasa/p/3334492.html](http://www.cnblogs.com/thinksasa/p/3334492.html)

## 变量引用

​	这个就不说了

## 函数引用

### 传址引用

​	这个也不说了

### 引用返回

​	先看代码：

```php
<?php
    function &test(){ 
        static $b=0;//申明一个静态变量 
        $b=$b+1; 
        echo $b; 
        return $b; }
    }
    $a=test();//这条语句会输出　$b的值　为１ 
    $a=5; $a=test();//这条语句会输出　$b的值　为2
    $a=&test();//这条语句会输出　$b的值　为3 
    $a=5; $a=test();//这条语句会输出　$b的值　为6
?>
```

​	下面解释下：
​	 ```$a=test()```方式调用函数，只是将函数的值赋给```$a```而已，而```$a```做任何改变，都不会影响到函数中的```$b```，而通过```$a=&test()```方式调用函数呢, 他的作用是将```return $b```中的```$b```变量的内存地址与```$a```变量的内存地址指向了同一个地方即产生了相当于这样的效果(``` $a=&b ```) 所以改变```$a```的值也同时改变了```$b```的值　所以在执行了```$a=&test(); $a=5; ```以后，```$b```的值变为了5

## 对象引用

```php
<?php
    class a{
        var $abc="ABC";
    } 
    $b=new a; 
    $c=$b; 
    echo $b->abc;//这里输出ABC 
    echo $c->abc;//这里输出ABC $b->abc="DEF"; 
    echo $c->abc;//这里输出DEF
?>
```

​	上列中```$b=new a;$c=$b;```其实等效于```$b=new a; $c=&$b;``` PHP5中默认就是通过引用来调用对象，但有时你可能想建立一个对象的副本，并希望原来的对象的改变不影响到副本 . 为了这样的目的，PHP定义了一个特殊的方法，称为```__clone```.