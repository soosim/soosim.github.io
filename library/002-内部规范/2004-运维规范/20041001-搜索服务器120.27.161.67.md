# 搜索服务器

> 公网IP：120.27.161.67     
> 内网IP：10.46.68.115    

## 1.数据目录

* 额外的数据盘挂载在 /data，所有者 root，权限为 755
* Elasticsearch 的数据目录为 /data/elasticsearch，所有者 elasticsearch，权限为 755

## 2.程序安装设置

### Elasticsearch

* 版本为 5.1.1
* 安装目录：/usr/share/elasticsearch


* 配置文件：/etc/elasticsearch/elasticsearch.yml
* 监听端口：`10.46.68.115:9200`
* IK 分词插件目录：/usr/share/elasticsearch/plugins/ik

### Kibina

* 版本为 5.1.1
* 安装目录：/usr/share/kibina
* 配置文件：/etc/kibana/kibana.yml
* 监听端口：10.46.68.115:5601

### Redis

* 版本为3.2.6
* 下载源码解压到 `/root/redis-3.2.6/src`

```
cd /root/redis-3.2.6
make
make install
```

* 运行安装脚本

```
cd /root/redis-3.2.6/utils
./install_server.sh
```

* 修改配置文件 `/etc/redis/6379.conf`

```
bind 127.0.0.1 10.46.68.115
requirepass xxxxxx
```

* 启动 Redis

```
systemctl start redis_6379
```



## 3.防火墙设置

* firewalld 的 trusted 区添加了两台 Windows 服务器的内网 ip，允许访问 elasticsearch、Redis



```
firewall-cmd --zone=trusted --add-source 10.51.31.28 --permanent
firewall-cmd --zone=trusted --add-source 10.117.28.192 --permanent
firewall-cmd --reload
```
